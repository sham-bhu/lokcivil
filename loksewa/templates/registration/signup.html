{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% if messages %}
  <div class="max-w-md mx-auto mt-6">
    {% for message in messages %}
      <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
        <span class="block sm:inline">{{ message }}</span>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% block content %}
<style>
  body {
    background: linear-gradient(135deg, #e0e7ff 0%, #f0fdfa 100%);
    min-height: 100vh;
  }
  .glass-card {
    background: rgba(255,255,255,0.7);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border-radius: 1.5rem;
    border: 1px solid rgba(255,255,255,0.3);
    box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18);
  }
  .floating-label {
    position: absolute;
    left: 2.5rem;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    transition: all 0.2s;
    color: #64748b;
    font-size: 1rem;
  }
  .input:focus + .floating-label,
  .input:not(:placeholder-shown) + .floating-label {
    top: -0.7rem;
    left: 2.2rem;
    font-size: 0.85rem;
    color: #2563eb;
    background: rgba(255,255,255,0.8);
    padding: 0 0.25rem;
    border-radius: 0.25rem;
  }
  .input:focus {
    box-shadow: 0 0 0 3px #2563eb44;
    border-color: #2563eb;
  }
  .icon-animate {
    transition: color 0.2s, transform 0.2s;
  }
  .input:focus ~ .icon-animate {
    color: #2563eb;
    transform: scale(1.1);
  }
  .error-message {
    transition: opacity 0.2s, transform 0.2s;
    opacity: 1;
    transform: translateY(0);
  }
  .error-message.hidden {
    opacity: 0;
    transform: translateY(-10px);
  }
</style>
<div class="flex items-center justify-center min-h-screen">
  <div class="glass-card max-w-md w-full mx-auto p-10">
    <h2 class="text-3xl font-extrabold mb-8 text-center text-blue-700 dark:text-blue-300 drop-shadow">Sign Up</h2>
    <form id="signupForm" method="post" action="" class="space-y-7">
      {% csrf_token %}
      <div class="relative">
        {{ form.first_name|add_class:'input pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-100 dark:text-gray-900 bg-white text-gray-900 placeholder-transparent transition'|attr:'placeholder: ' }}
        <label for="id_first_name" class="floating-label">First Name</label>
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 icon-animate">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
        </span>
        {% if form.first_name.errors %}
          <p class="error-message text-red-500 text-sm mt-1">{{ form.first_name.errors.0 }}</p>
        {% endif %}
      </div>
      <div class="relative">
        {{ form.last_name|add_class:'input pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-100 dark:text-gray-900 bg-white text-gray-900 placeholder-transparent transition'|attr:'placeholder: ' }}
        <label for="id_last_name" class="floating-label">Last Name</label>
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 icon-animate">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
        </span>
        {% if form.last_name.errors %}
          <p class="error-message text-red-500 text-sm mt-1">{{ form.last_name.errors.0 }}</p>
        {% endif %}
      </div>
      <div class="relative">
        {{ form.username|add_class:'input pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-100 dark:text-gray-900 bg-white text-gray-900 placeholder-transparent transition'|attr:'placeholder: ' }}
        <label for="id_username" class="floating-label">Username</label>
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 icon-animate">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.655 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
        </span>
        {% if form.username.errors %}
          <p class="error-message text-red-500 text-sm mt-1">{{ form.username.errors.0 }}</p>
        {% endif %}
      </div>
      <div class="relative">
        {{ form.email|add_class:'input pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-100 dark:text-gray-900 bg-white text-gray-900 placeholder-transparent transition'|attr:'placeholder: ' }}
        <label for="id_email" class="floating-label">Email address</label>
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 icon-animate">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M16 12H8m8 0a4 4 0 11-8 0 4 4 0 018 0zm0 0v1a4 4 0 01-4 4H8a4 4 0 01-4-4v-1" /></svg>
        </span>
        {% if form.email.errors %}
          <p class="error-message text-red-500 text-sm mt-1">{{ form.email.errors.0 }}</p>
        {% endif %}
      </div>
      <div class="relative">
        {{ form.password1|add_class:'input pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-100 dark:text-gray-900 bg-white text-gray-900 placeholder-transparent transition'|attr:'placeholder: ' }}
        <label for="id_password1" class="floating-label">Password</label>
        <button type="button" id="togglePassword1" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 focus:outline-none" tabindex="-1">
          <svg id="eyeIcon1" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0zm6 0c0 5-7 9-7 9s-7-4-7-9a7 7 0 0114 0z" /></svg>
        </button>
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 icon-animate">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 11c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 0v2m0 4h.01" /></svg>
        </span>
        {% if form.password1.errors %}
          <p class="error-message text-red-500 text-sm mt-1">{{ form.password1.errors.0 }}</p>
        {% endif %}
      </div>
      <div class="relative">
        {{ form.password2|add_class:'input pl-10 w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-100 dark:text-gray-900 bg-white text-gray-900 placeholder-transparent transition'|attr:'placeholder: ' }}
        <label for="id_password2" class="floating-label">Password confirmation</label>
        <button type="button" id="togglePassword2" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 focus:outline-none" tabindex="-1">
          <svg id="eyeIcon2" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0zm6 0c0 5-7 9-7 9s-7-4-7-9a7 7 0 0114 0z" /></svg>
        </button>
        <span class="absolute inset-y-0 left-0 flex items-center pl-3 icon-animate">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 11c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm0 0v2m0 4h.01" /></svg>
        </span>
        {% if form.password2.errors %}
          <p class="error-message text-red-500 text-sm mt-1">{{ form.password2.errors.0 }}</p>
        {% endif %}
      </div>
      <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-blue-400 hover:from-blue-700 hover:to-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg transform transition hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-400">Sign Up</button>
    </form>
    <p class="mt-6 text-center text-gray-600 dark:text-gray-700">Already have an account? <a href="/accounts/login/" class="text-blue-600 dark:text-blue-400 font-semibold hover:underline">Login</a></p>
  </div>
</div>
<script>
// Password visibility toggle only
const togglePassword1 = document.getElementById('togglePassword1');
const togglePassword2 = document.getElementById('togglePassword2');
const password1 = document.getElementById('id_password1');
const password2 = document.getElementById('id_password2');
const eyeIcon1 = document.getElementById('eyeIcon1');
const eyeIcon2 = document.getElementById('eyeIcon2');

togglePassword1.addEventListener('click', function() {
    const type = password1.type === 'password' ? 'text' : 'password';
    password1.type = type;
    eyeIcon1.setAttribute('stroke', type === 'password' ? 'currentColor' : '#2563eb');
});
togglePassword2.addEventListener('click', function() {
    const type = password2.type === 'password' ? 'text' : 'password';
    password2.type = type;
    eyeIcon2.setAttribute('stroke', type === 'password' ? 'currentColor' : '#2563eb');
});


</script>
{% endblock %} 